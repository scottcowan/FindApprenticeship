@using SFA.Apprenticeships.Web.Recruit.Constants

@model SFA.Apprenticeships.Web.Raa.Common.ViewModels.Application.BulkDeclineCandidatesViewModel

@{
    ViewBag.Title = "Recruit an Apprentice - Send Bulk Unsuccessful decision";
}

@using (Html.BeginRouteForm(RecruitmentRouteNames.BulkDeclineCandidates, FormMethod.Post, new { id = "confirm-bulk-decline-candidates-form" }))
{

    @Html.HiddenFor(m => m.VacancyApplicationsSearch.VacancyReferenceNumber)
    @Html.HiddenFor(m => m.VacancyApplicationsSearch.FilterType)
    @Html.HiddenFor(m => m.VacancyApplicationsSearch.OrderByField)
    @Html.HiddenFor(m => m.VacancyApplicationsSearch.Order)

    <div class="grid-row">
        <div class="column-two-thirds">

            <h1 class="heading-xlarge">Inform the selected candidates their applications have been unsuccessful</h1>
        </div>
    </div>
    <div class="grid-row sfa-inset sfa-inset-light-grey">
        <div class="column-one-third">
            <ul id="triple">
                @foreach (var application in Model.ApplicationSummaries.Where(a => Model.SelectedApplicationIds.Contains(a.ApplicationId)))
                {
                    var applicationId = application.ApplicationId;
                    <li>
                        @application.FirstName @application.LastName
                        <input type="hidden" name="@Html.NameFor(m => m.SelectedApplicationIds)" value="@application.ApplicationId" />
                    </li>
                }
            </ul>
        </div>
        <div class="column-full sfa-large-top-margin">
            <button type="submit" class="sfa-mock-link" name="EditBulkDeclineCandidatesAction" value="EditBulkDeclineCandidates">Edit list</button>
        </div>
    </div> 
    <div class="grid-row">
        <div class="column-two-thirds">
            <h2 class="heading-large">Candidate feedback</h2>
            <p>
                An automated message will now be sent to these candidates.
                You must provide feedback explaining why they have not been selected for the role of @Model.Title
            </p>
            <h2 class="bold-small">What feedback would you like to share with these candidates?</h2>
            @Html.FormTextAreaFor(m => m.UnSuccessfulReason,
            controlHtmlAttributes: new { @class = "form-control-4-4", type = "text", size = 12, rows= 7 },
            labelHtmlAttributes: new { @class = "bold-small" })

            <div class="form-group inline sfa-xlarge-top-margin">
                <button type="submit" class="button" name="SendBulkUnsuccessfulDecisionAction" value="SendBulkUnsuccessfulDecision">
                    Send feedback
                </button>
                @Html.RouteLink("Cancel", RecruitmentRouteNames.BulkDeclineCandidates, new RouteValueDictionary { { "VacancyApplicationsSearch.VacancyReferenceNumber", Model.VacancyApplicationsSearch.VacancyReferenceNumber } }, new { @class = "button sfa-button-secondary" })
            </div>
        </div>
    </div>
}

